
@{
    ViewBag.Title = "Publicacao";
}
<script>index = false;</script>
<link href="~/Content/publicacao.css" rel="stylesheet" />
@if (ViewBag.Publicacao == null)
{
    <h1>Publicação não encontrada!</h1>
}
else
{
    <div class="containerPost">
        <div class="informacoesPessoaisPublicacao">
            <a href="/Perfil/@ViewBag.Publicacao.IdUsuario"><img class="fotoUsuarioPublicacao" src="@ViewBag.UsuarioCriador.FotoPerfil" /></a>
            <span class="nomeUsuarioPublicacao">@ViewBag.UsuarioCriador.Nome</span>
            <span class="horarioPublicacao">@ViewBag.Publicacao.Data.ToString("dd/MM/yyyy") às @ViewBag.Publicacao.Data.ToString("t")</span>

            @if (ViewBag.IsYourself)
            {
                <a class="btn-small deletarPublicacao modal-trigger" href="#modalDeletar" onclick="idPublicacaoADeletar = @ViewBag.Publicacao.IdPublicacao"><i class="material-icons">delete</i></a>
                <a class="btn-small editarPublicacao modal-trigger" href="#modalEditar"><i class="material-icons" onclick="comecarEdicaoPost(@ViewBag.Publicacao.IdPublicacao)">edit</i></a>
            }

            <ul class="right">
                @foreach (var usuario in ViewBag.Publicacao.UsuariosMarcados)
                {
                    <li>
                        <a href="/perfil/@usuario.Id">
                            <div class="chip">
                                <img src="@usuario.FotoPerfil">
                                @usuario.Nome
                            </div>
                        </a>
                    </li>
                }
            </ul>
        </div>
        @{
            var titulo = "titulo" + ViewBag.Publicacao.IdPublicacao;
            var descricao = "descricao" + ViewBag.Publicacao.IdPublicacao;
        }
        <h4 class="tituloPublicacao" id="@titulo">@ViewBag.Publicacao.Titulo</h4>
        <hr />
        <p class="flow-text textoPublicacao" id="@descricao">@ViewBag.Publicacao.Descricao</p>
    </div>
}

@if (ViewBag.IsYourself)
{
    <div id="modalDeletar" class="modal">
        <div class="modal-content">
            <h4>Aviso</h4>
            <p>Deseja realmente excluir esta publicação? A ação não poderá ser desfeita.</p>
        </div>
        <div class="modal-footer">
            <a href="#!" class="modal-close waves-effect waves-green btn-flat">Cancelar</a>
            <a href="#!" class="modal-close waves-effect waves-green btn-flat" onclick="deletarPublicacao()">Continuar</a>
        </div>
    </div>

    <div id="modalEditar" class="modal">
        <div class="modal-content containerPost containerEditar">
            <h4 class="flow-text">Editar Publicação</h4>
            <input type="text" placeholder="Título" id="tituloEditar" maxlength="100">
            <textarea class="materialize-textarea txtEditar" placeholder="Escreva algo..."></textarea>
            <div class="btn btnEditar" onclick="editarPublicacao()">Atualizar</div>
        </div>
    </div>
}

<script src="~/Scripts/publicacao.js"></script>